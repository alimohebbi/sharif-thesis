\chapter{معیارهای جهش و فرآیند}
 
\label{sec:method}
با  مطالعات مروری انجام شده نقاطی از این حوزه که نیازمند پژوهش بیشتر هستند تا بتوان به وسیله‌ی آن به ارائه‌ی روشی کاراتر در پیش‌بینی خطا پرداخت مشخص شد. مقاله‌ی \cite{bowes2016mutation} اولین مقاله‌ای است که  یک  روش پیش‌بینی خطا با استفاده از تحلیل جهش ارائه نموده  است و این موضوع نیازمند تحقیق بیشتر است. از طرف دیگر بر طبق مقاله‌ی \cite{radjenovic2013software} استفاده از معیارهای فرآیند علی‌رغم توانایی بالقوه‌ای که در پیش‌بینی خطا دارند، در پژوهش‌های کمتری مورد بررسی قرار گرفته‌اند. یکی از دلایل آن می‌تواند نو ظهور بودن این معیارها نسبت به سایرین باشد. معیارهای فرآیند از جنبه‌های مختلف نیز از سایر معیار‌ها برتری دارند \cite{rahman2013and}. \\
این پژوهش قصد دارد سه رویکرد  پیشنهادی را به منظور بهبود پیش‌بینی خطا بررسی کند.  این رویکردها عبارتند از:
\begin{enumerate}
\item
در این رویکرد معیارهای جهش و معیارهای فرآیند در کنار یکدیگر استفاده می‌شوند و به وسیله‌ی آنها پیش‌بینی انجام می گیرد. این دو دسته معیار در پژوهش‌های گذشته مطرح شده‌اند اما تاکنون در کنار یکدیگر قرار نگرفته‌اند.
\item
معیارهای جدیدی مطرح می‌شوند که مبتنی بر مفاهیم آزمون جهش و فرآیند توسعه‌ی نرم‌افزار است.
\item
معیارهای جدیدی مطرح می‌شوند که با کمک مفاهیم جهش سعی در بهبود معیارهای فرآیند دارند.
\end{enumerate}

\section{معیارهای جهش و فرآیند}
\label{sec:method-phase1}

این رویکرد با توجه به مقاله‌ی \cite{bowes2016mutation} مطرح شده که در آن بررسی به کارگیری معیارهای جهش و فرآیند را در پژوهش‌های آتی توصیه می‌کند.  همچنین  معیار جهش یک معیار  مرتبط با کد است. مقاله‌ی \cite{rahman2013and}  بیان می‌کند که معیارهای کد ایستا هستند و تمایل دارند که یک موجودیت را در انتشارهای متوالی حاوی خطا معرفی کنند. حال شرایطی را در نظر بگیرید که که امتیاز جهش در یک موجودیت کم باشد و دلیل آن کافی نبودن مجموعه آزمون باشد چراکه توسعه‌دهندگان از درست بودن کد اطمینان دارند یا اینکه پس از انتشارهای متوالی خطاها بر طرف شده است. چنین موجودیتی حاوی خطا نیست اما با توجه به معیار جهش خطا‌خیز است. با در نظر گرفتن معیارهای فرآیند در مورد این موجودیت که نشان می‌دهند پایدار و بدون تغییر است از میزان خطا‌خیز بودن آن کاسته می‌شود و انتظار می‌رود کارایی مدل پیش‌بینی بهبود یابد. 
برای پاسخ به این پرسش مجموعه معیارهای جهش  از پژوهش \cite{bowes2016mutation}  و معیارهای فرآیند از پژوهش \cite{rahman2013and} انتخاب می‌شوند. در جداول  \ref{tab:process-metircs} و \ref{tab:mutation-metircs} معیارهای مورد نظر آورده شده است و در ادامه معرفی شده و  \\
\begin{table}[H] 
	\renewcommand*{\arraystretch}{1}	
	\centering \caption{معیارهای فرآیند 
		\cite{rahman2013and}}
	\label{tab:process-metircs}
	\newcolumntype{C}{>{\centering\arraybackslash} m } 
	\newcounter{magicrownumbers}
	\def\rownumber{}
	\setcounter{magicrownumbers}{0}
	\begin{tabular}{|@{\makebox[3em][c]{\rownumber\space}} |c|c|}
		
		\hline
		\hline
		نام معیار  & توضیح
		\gdef\rownumber{\stepcounter{magicrownumbers}\arabic{magicrownumbers}} 
		\\
		
		\hline
		\hline
	\lr{COMM } & تعداد ثبت در سیستم کنترل نسخه
		\\
		\hline
		\lr{ADEV} & تعداد توسعه‌دهندگان فعال
		\\ 
		\hline
		\lr{DDEV} & تعداد توسعه‌دهندگان متمایز
		\\ 
		\hline
		\lr{ADD} &  مقدار نرمال‌سازی شده‌ی تعداد خطوط اضافه شده
		\\ 
		\hline
		\lr{DEL}  & مقدار نرمال‌سازی شده‌ی تعداد خطوط حذف شده
		\\ 
		\hline
		\lr{OWN} &  درصد خطوطی که مالک فایل مشارکت کرده
		\\ 
		\hline
		\lr{MINOR} & تعداد مشارکت‌کنندگان جزئی
		\\ 
		\hline
		\lr{NCOMM} & تعداد ثبت‌های همسایگان
		\\ 
		\hline
		\lr{NADEV} & تعداد توسعه‌دهندگان فعال همسایگان
		\\ 
		\hline
		\lr{NDDEV} & تعداد توسعه‌دهندگان متمایز همسایگان
		\\ 
		\hline
		\lr{OEXP} & تجربه‌ی مالک فایل
		\\ 
		\hline
		\lr{AEXP} & تجربه‌ی تمام مشارکت‌کنندگان
		\\ 
		\hline
		
	\end{tabular}
\end{table}

\begin{table}[H] 
	\renewcommand*{\arraystretch}{1}	
	\centering \caption{معیارهای جهش 
		\cite{bowes2016mutation}}
	\label{tab:mutation-metircs}
	\newcolumntype{C}{>{\centering\arraybackslash} m } 
	\def\rownumber{}
	\setcounter{magicrownumbers}{0}
	\begin{tabular}{|@{\makebox[3em][c]{\rownumber\space}} |c|c|}
		
		\hline
		\hline
		نام معیار  & توضیح
		\gdef\rownumber{\stepcounter{magicrownumbers}\arabic{magicrownumbers}} 
		\\
		\hline
		\hline
		\lr{MuNOM } &   تعداد جهش‌یافته‌های تولید شده
		\\
		\hline
		\lr{MuNOC} &   تعداد جهش‌یافته‌های پوشش‌داده شده توسط آزمون‌ها
		\\
		\hline
		\lr{MuNMS} &   امتیاز جهش‌یافته‌های تولید شده
		\\
		\hline
		\lr{MuNMSC} &   امتیاز جهش‌یافته‌های پوشش‌داده شده توسط آزمون‌ها
		\\
		\hline
		
	\end{tabular}
\end{table}
از آنجا که  در این پژوهش پیش‌بینی‌ها در سطح فایل انجام می‌شود، معیارها برای هر فایل جداگانه محاسبه می‌شوند. در ادامه هر یک از معیارهای فرآیند معرفی و نحوه‌ی محاسبه‌ی آن‌ها بیان می‌شود. معیارهای جهش به طور مستقیم توسط ابزارهای موجود محاسبه‌ می‌گردد.\\

\begin{enumerate}
\item
\textbf{تعداد ثبت در سیستم کنترل نسخه:}
 تعداد ثبت‌هایی که در آن فایل مورد نظر در طول انتشار قبلی تاکنون تغییر کرده است. برای محاسبه ی آن لازم است که تمام ثبت‌های پروژه بین ثبت کنونی و \واژه{انتشار} قبلی بررسی شود و ثبت‌هایی که در آن این فایل تغییر کرده‌اند شمرده شوند.
 \item
\textbf{تعداد توسعه‌دهندگان 
	فعال:}
 تعداد توسعه‌دهندگانی که در طول انتشار قبلی تا کنون (زمان ثبت) فایل را تغییر داده‌اند. لازم است ثبت‌های موجود در باز‌ه‌ی زمانی خواسته شده بررسی شود و آنها که فایل مورد نظر را تغییر داده‌اند انتخاب شوند. نام کسانی که ثبت را انجام داده‌اند بازیابی شود و تعداد نامهای متمایز شمرده شود. 
 \item
 \textbf{تعداد توسعه‌دهندگان	متمایز:}
 مشابه معیار قبلی با این تفاوت که در طول انتشار محاسبه نمی‌شود. بلکه از ابتدای پروژه تا زمان ثبت در نظر گرفته می‌شود. 
\item
\textbf{مقدار نرمال‌سازی شده‌ی تعداد خطوط اضافه شده:}
این معیار تعداد خطوط اضافه شده در یک فایل را در طول انتشار قبلی می‌شمارد. سپس جهت نرمال سازی آنرا بر تعداد کل خطوط اضافه شده در پروژه در طول انتشار قبلی تقسیم می‌کند. برای بدست آوردن تعداد خطوط اضافه شده در یک فایل هر ثبت تسبت به ثبت قبلی مقایسه می‌شود و تعداد خطوط اضافه شده جمع زده می‌شود.
\item
\textbf{مقدار نرمال‌سازی شده‌ی تعداد خطوط حذف شده:}
مشابه معیار قبلی می‌باشد. 
\item
\textbf{تعداد خطوطی که مالک فایل مشارکت کرده:}
 درصد خطوطی  از فایل، در  ثبت مورد نظر  که به مالک فایل تعلق دارد. مالک فایل کسی است که در آن لحظه از زمان بیشترین تعداد خطوط موجود در فایل به او تعلق دارد. ابتدا نویسنده‌ی هر خط مشخص می‌شود سپس برای هر تویسنده تعداد خطوطی که به وی تعلق دارد شمرده می‌شود. تعداد خطوط مالک فایل بر تعداد خطوط فایل تقسیم می‌گردد.
\item
\textbf{تعداد مشارکت‌کنندگان جزئی:}
توسعه‌دهنده‌ی جزئی کسی است که کمتر از ۵٪ خطوط موجود در فایل به او تعلق داشته باشد. بدین منظور نویسنده‌ی هر خط مشخص می‌شود. تعداد خطوط هر نویسنده شمرده می‌شود و بر تعداد خطوط فایل تقسیم می‌شود. سپس تعداد نویسندگانی که کمتر از ۵٪ مشارکت داشته‌اند شمرده می‌شود. 
\item
\textbf{تعداد ثبت‌های همسایگان}
 میانگین وزن دهی شده تعداد ثبت‌های همسایگان فایل از انتشار قبلی تا کنون را اندازه‌گیری می‌کند. همسایگان یک فایل در یک ثبت، فایل‌هایی هستند که در آن نسخه از برنامه تغییر کرده‌اند. در‌واقع در هر ثبت از برنامه تعدادی فایل نسبت به ثبت قبلی تغییر کرده‌اند که این فایل‌ها همسایه‌ی یکدیگر محسوب می شوند. نحوه‌ی وزن دهی نیز به این صورت است که هرچقدر یک فایل تعداد دفعات بیشتری را در طول انتشار با فایل مورد نظر همسایه شده باشد وزن بیشتری می‌یابد. برای محاسبه ابتدا همسایگان فایل در ثبت  و تعداد دفعاتی که  در طول انتشار همسایه شده‌اند مشخص می‌شوند. سپس برای هر فایل همسایه، معیار تعداد ثبت در سیستم کنترل نسخه محاسبه می‌شود. هر معیار در تعداد دفعاتی همسایگی ضرب می‌شود و با هم جمع زده می‌شوند. در انتها بر تعداد کل دفعات همسایگی همسایگان تقسیم می‌شود. 
\item
\textbf{تعداد توسعه‌دهندگان فعال همسایگان:}
مشابه معیار قبلی عمل می‌شود با این تفاوت که معیار توسعه‌دهندگان فعال در نظر گرفته خواهد شد.

\item
\textbf{تعداد توسعه‌دهندگان متمایز همسایگان:}
مشابه معیار قبلی عمل می‌شود با این تفاوت که معیار توسعه‌دهندگان متمایز در نظر گرفته خواهد شد.
\item
\textbf{تجربه‌ی مالک فایل:}
 ابتدا لازم است که نحوه ی محاسبه تجربه را تعریف کنیم. هر چقدر یک فرد تعداد تغییرات بیشتری را در یک پروژه انجام دهد تجربه بیشتری را در آن پروژه دارد و ثبت را می‌توان به ایجاد تغییر تعبیر کرد. برای محاسبه‌ی معیار ابتدا مالک فایل مشخص می شود. سپس تعداد ثبت‌هایی که مالک فایل از ابتدای پروژه تا زمان مورد نظر انجام داده، شمرده می شود.
\item
\textbf{تجربه‌ی تمام مشارکت‌کنندگان:}
تمام مشارکت‌کنندگان در فایل تا زمان ثبت مورد نظر یافت می‌شوند. برای هر یک مشابه معیار قبلی تجربه، محاسبه می‌شود و از مقدار تجربه‌ها میانگین هندسی گرفته می‌شود. 

\end{enumerate}


%%%%%%%%%%%
\section{معیارهای جهش مبتنی بر فرآیند}
در رویکرد دوم، چهار معیار جدید در این پژوهش معرفی می‌شوند که با استفاده از مفاهیم آزمون جهش و تاریخچه‌ی توسعه‌ی نرم‌افزار ساخته می‌شوند. از این رو این معیارها  \نام{معیارهای جهش مبتنی بر فرآیند}{Process Based Mutation Metrics (PBMM)} نامیده شده‌اند. 

\begin{enumerate}
	\item  
	\textbf{
		تعداد جهش‌یافته‌های تولید شده‌ی جدید نسبت به انتشار قبلی برنامه: }همانطور که در مقاله‌ی \cite{just2014mutants} مطرح شده جهش‌یافته‌ها جایگزین خوبی برای خطاهای واقعی می‌باشند. زمانی که تعداد جهش‌یافته‌های جدید زیاد باشد یعنی تغییراتی که خطا‌خیز‌تر هستند بیشتر است. به منظور محاسبه‌ی این معیار لازم است خطوط اضافه شده به فایل مورد نظر در ثبت کنونی، نسبت به انتشار قبلی مشخص شود و سپس تعداد جهش یافته‌هایی که این خطوط تولید می‌کنند شمرده شوند. 
	\item 
	\textbf{
		تعداد جهش‌یافته‌های متمایز در چند انتشار اخیر:} این معیار نشان می‌دهد موجودیت مورد بررسی به چه میزان سابقه‌ی تغییراتی را دارد که احتمال بروز خطا را افزایش می‌دهد. تعداد انتشارها باید به گونه‌ای باشد که کم یا زیاد نباشد. زیرا تعداد انتشارهای کم سبب می‌شود تفاوت جندانی با معیار قبلی نداشت باشد و سابقه‌ی تغییرات به اندازه‌ی کافی مد نظر قرار نگیرد. از طرف دیگر در نظر گرفتن تعداد زیادی انتشار هم هزینه‌بر است و هم به دلیل تغییرات زیاد  فایل در طول توسعه‌ی نرم‌افزار اطلاعات اولیه مفید نخواهد بود. عدد در نظر گرفته شده برای تعداد انتشارها چهار می‌باشد. نحوه‌ی محاسبه به این شکل است که برای هر انتشار تعداد جهش‌یافته‌ها در انتشار جدید، نسبت به قبلی  شمرده می‌شود و با یکدیگر جمع زده  می‌شوند. 
	
	\item 
	\textbf{
		میزان تغییرات مثبت امتیاز جهش  در چند انتشار اخیر:}
	تغییرات امتیاز جهش نشان از تغییرات در برنامه و آزمون‌های نرم‌افزار است. این معیار نشان می‌دهد این تغییرات به چه میزان در جهت بهبود کیفیت نرم‌افزار بوده. چراکه امتیاز بالاتر جهش نشان از کیفیت بهتر آزمون‌ها و در نتیجه نرم‌افزار است.  به منظور محاسبه‌ی این معیار در هر انتشار امتیاز جهش محاسبه می‌شود و در صورتی که نسبت به انتشار قبلی تغییر مثبت  بود به مجموع تغییرات افزوده می‌شود. 
	\item 
	\textbf{
		میزان تغییرات منفی امتیاز جهش در چند انتشار اخیر:}
	این معیار مشابه معیار سوم عمل می‌کند با این تفاوت که میزان تغییرات در خلاف جهت بهبود نرم‌افزار را می‌سنجد. 	
	
\end{enumerate}


\section{معیارهای ترکیبی جهش-فرآیند}
رویکرد سوم با توجه به مطالب گفته شده در مقاله‌ی \cite{rahman2013and} مطرح شده که بیان می‌کند معیارها هر چقدر هم که پویا باشند (دچار رکود نشوند، مانند معیارهای فرآیند) زمانی در پیش‌بینی خطا مفید هستند که همراه با ایجاد خطا باشند. نکته‌ی قابل توجه این است که همه‌ی تغییرات در یک فایل به یک اندازه موجب بر پیچیدگی فایل نمی‌افزایند و به عبارت دیگر موجب بروز خطا نمی‌شوند. به عنوان مثال در یک فایل به زبان جاوا ممکن است \واژه{توضیح} و یا \واژه{مستند‌جاوا} وجود داشته باشد که بروزرسانی یا اضافه و کم شدن آنها تاثیری بر روند اجرای برنامه و میران پیچیدگی ندارند با این حال در محاسبه‌ی معیارهای پیش‌بینی خطا در نظر گرفته می‌شوند. هدف از ارائه‌ی معیارهای \نام{ترکیبی جهش-فرآیند}{Process-Mutation Hybrid} بهبود کاستی‌های معیارهای فرآیند در چنین شرایطی است. در اینجا دو معیار \موکد{مقدار نرمال شده‌ی خطوط اضافه شده} و یا \موکد{کم شده} است.  این دو معیار جز شاخص‌ترین معیارهای فرآیند هستند.\\
در نگاه اول  این ایده به ذهن می‌رسد که با توجه به تعداد جهش‌یافته‌هایی که  اضافه  و یا حذف هر خط ایجاد می‌کند، اضافه یا کم شدن خطوط وزن دهی شود و به منظور اجرای آن از دو  فرمول زیر بهره گرفت.\\
\begin{latin}
	
	$M_1 =\ number\ of\ lines\ added\ \times \ number\ of\ muatants\ derived$\\
	
	$M_2 =\ number\ of\ lines\ deleted\ \times \ number\ of\ mutants\ derived$\\
\end{latin}


با وجود مناسب بودن ایده ی اولیه با بررسی‌های بیشتر دو مشکل در معیارهای فوق مشخص می‌شود.\\
مشکل اول : هدف از ارئه ی این معیارها وزن دهی به خطوط اضافه و کم شده است. نکته قابل توجه این است که هر خط باید به صورت جداگانه وزن دهی شود و وزن یک خط بر وزن خط دیگر تأثیری نداشته باشد. مثال زیر را در نظر بگیرید.
\begin{latin}
\flushleft
//this method is important  \emph{→ 0 mutant} \\
// this method get root of \emph{→ 0 mutant}\\
// sum of a plus b \emph{→ 0 mutant} \\ 
b = sqrt(a+b) \emph{→ 2 mutant} \\
\end{latin}

فرض کنید ۴ خط بالا به یک فایل اضافه شده است. معیار  \موکد{مقدار نرمال شده‌ي خطوط اضافه شده} قبل ار نرمال سازی عدد چهار را نمایش می‌دهد در حالی که از این چهار خط ۳ خط توضیح است. حال معیار اولیه پیشنهادی برابر ۸ خواهد بود که بدیهی است، از هدف ارايه ی متریک فاصله گرفته است. حال اگر تنها جهش یافته‌های تولید شده در خطوط اضافه شده را در نظر بگیریم این مقدار می‌تواند جایگزین مناسبی باشد. در‌ واقع نگاشتی را ارائه می‌شود که هر خط از برنامه را به یک عدد نگاشت می‌دهد. این عدد میزان پیچیدگی آن خط و یا احتمال بروز خطا را تعریف می‌کند.  لازم به یادآوری است که در مقاله‌ی  \cite{just2014mutants} اشاره شده که جهش یافته ها جایگزین خوبی برای خطاهای واقعی هستند. این نگاشت برابر است با تعداد جهش یافته های تولید شده در آن خط.

مشکل دوم: این معیار برای عمل‌کرد هرچه بهتر مشابه معیار  \موکد{مقدار نرمال شده‌ي خطوط اضافه شده}‌ نیاز به نرمال‌سازی دارد. به جهت نرمال‌سازی نمی‌توان از همان روش استفاده کنیم چراکه در آن وزن دهی به خطوط وجود ندارد و از آن مهم‌تر توضیحات را نیز در نظر می‌گیرد. از طرف دیگر این امکان وجود ندارد که برای تمام خطوط اضافه یا کم شده در کل پروژه در طول یک انتشار جهش یافته تولید شود (به دلیل زمانبر بودن و پیچیدگی‌های فراوان در پیاده سازی). در مقالات گذشته اشاره شده که تعداد ثبت‌ها می‌تواند نشانگر میزان تغییرات باشد. بنابرین از تعداد ثبت‌های کل پروژه در طول یک انتشار به منظور نرمال‌سازی استفاده خواهد شد.

در نهایت نحوه‌ی محاسبه به این صورت خواهید بود که ابتدا ثبت‌هایی از برنامه در طول آخرین انتشار که در آن فایل مورد نظر تغییر کرده است بازیابی می شود. سپس برای هر ثبت تعداد جهش یافته‌های جدید نسبت به ثبت قبلی محاسبه می‌شود و برای محاسبه‌ی جهش‌یافته‌های حذف شده تعداد جهش یافته‌ها در  ثبت قبلی را یافته و آن‌ها که جز خطوط حذف شده در ثبت بعدی است شمرده می شود. تعداد جهش‌یافته‌های اضافه و حذف شده در ثبت‌ها جمع شده و بر تعداد ثبت‌های کل پروژه در طول انتشار تقسیم می گردد.




